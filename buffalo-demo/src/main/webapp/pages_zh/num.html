<script language="javascript">
var buffalo = new Buffalo(endPoint);
init();
function init() {
	buffalo.remoteCall("numberService.newRound",[], function(reply) {
		window.status = "加载完成。";
		Buffalo.getElementById("num").focus();
		document.referer="";
	});
}
function guess() {
	var num = parseInt(Buffalo.getElementById("num").value);
	var numObj = (Buffalo.getElementById("num"));
	var info = Buffalo.getElementById("info_panel");
	
	buffalo.remoteCall("numberService.guess",[num], function(reply) {
		var result = reply.getResult();
		if (!result.success) {
			numObj.select();
			info.innerHTML = result.hint+"。你已经猜了"+result.numGuesses+"次"; 
		} else {
			info.innerHTML = "恭喜你，你经过 " + result.numGuesses + " 次就猜对了！";
			if (confirm("要再来一局吗？")) {
				init();
			}
		}
	})
}
</script>

<h1>猜数字</h1>
<hr/>
<p><span id="info_panel" class="style2">欢迎来玩猜数字游戏。</span></p>
<p>我正在想一个0-100之间的数字，你能猜出来吗？</p>
<p>你的数字：
  <input name="num" type="text" id="num"  onKeyDown="javascript:if (event.keyCode==13) {guess();}">
  <input type="button" name="Submit" value="提交" onClick="guess()">
</p>
<p><a href="/jsp-examples/num/numguess.jsp" target="_blank">点击这里看常规版本(普通JSP实现)&gt;&gt;</a></p>